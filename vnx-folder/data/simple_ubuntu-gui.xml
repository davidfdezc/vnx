<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE vnx SYSTEM "/usr/share/xml/vnx/vnx-1.92.dtd">

<!--

Simple scenario
Just one Ubuntu virtual machine. Use this specification for testing

-->

<vnx>
  <global>
    <version>1.92</version>
    <scenario_name>simple_ubuntu-gui</scenario_name>
    <automac offset="5"/>
    <vm_mgmt type="none" />
  </global>
    
  <net name="Net0" mode="virtual_bridge" />
  
  <!-- NODES -->
  <vm name="ubuntu-gui" type="libvirt" subtype="kvm" os="linux">
    <filesystem type="cow">/usr/share/vnx/filesystems/root_fs_linux</filesystem>
    <mem>256M</mem>
    <if id="1" net="Net0">
      <ipv4>10.0.0.5/24</ipv4>
    </if>
    <filetree seq="vnxtxt" root="/tmp">conf/txtfile</filetree>
    <filetree seq="vnxwww" root="/tmp">conf/txtfile</filetree>
    <filetree seq="start-www" root="/var/www">conf/txtfile</filetree>
    <exec seq="vnxtxt" type="verbatim" mode="system">gedit /tmp/vnx.txt</exec>
    <exec seq="vnxtxt" type="verbatim" mode="system">sleep 3; wmctrl -r vnx.txt -b add,maximized_vert,maximized_horz</exec>
    <exec seq="vnxtxtoff" type="verbatim" mode="system">pkill gedit; rm /tmp/vnx.*</exec>
    <exec seq="vnxwww" type="verbatim" mode="system">epiphany /tmp/vnx.html</exec>
    <exec seq="vnxwwwoff" type="verbatim" mode="system">pkill epiphany; rm /tmp/vnx.*</exec>
    <exec seq="calc" type="verbatim" mode="system">gcalctool</exec>
    <exec seq="calcoff" type="verbatim" mode="system">pkill gcalctool</exec>
    <exec seq="ping" type="verbatim" mode="system">'ping 10.0.0.1'</exec>
    <exec seq="showlog" type="verbatim" mode="system">tail -f /var/log/vnxdaemon.log</exec>
    <exec seq="start-www" type="verbatim" mode="system">chmod 644 /var/www/*</exec>
    <exec seq="start-www" type="verbatim" mode="system">service apache2 start</exec>
    <exec seq="stop-www" type="verbatim" mode="system">service apache2 stop</exec>
  </vm>

  <host>
    <hostif net="Net0">
       <ipv4>10.0.0.1/24</ipv4>
    </hostif>
  </host>
  
</vnx>